/*-=-=-=-=-=-=Here are the places Ids for google and the lost of the clients*/

/*=-=-=-=-=-=-SIGHT SEEING JSON-=-=-*/
let sightsJSON = {
	TM: {
		Id: "ChIJdeCOYqJnzB0Rm5YhSFRUI2w",
		info: `The Table Mountain Aerial Cableway Company has been providing visitors with a world-class experience since October 4, 1929. The company operates in a National Park and World Heritage Site.`
	},
	//Cape Point
	CP: {
		Id: "ChIJAf2PqQkjzB0RTEFJZ9rJSSM",
		info: `Cape Point is like no other. 
		At Cape Point Nature Reserve, the mountain and ocean meet in a thunderous clash of water 
		against rock, producing a dramatic landscape inhabited by an incredible diversity of life. 
		`
	},
	//Boo-Kaap
	BK: {
		Id: "ChIJLSz2VWhnzB0Rpm9vazg9yw4",
		info: `A popular daytime destination, hillside Bo-Kaap is known for its narrow cobbled streets lined with colorful houses. Local Cape Malay culture is represented at sites like the 1790s-built Auwal Mosque and the Bo-Kaap Museum, with exhibits about the achievements of Muslim immigrants. Nearby, simple restaurants serve curries, roti and other Cape Malay dishes. The Noon Gun cannon is fired daily at midday from Signal Hill.`
	},
	// Constainta
	CON: {
		Id: "ChIJ29Ra-NNpzB0R03JXGGkr6Bo",
		info: `Constantia is a wine-producing suburb of Cape Town, South Africa. The Constantia Wine Route links the many wineries dotting the Constantia Valley. Housed in a 17th-century wine estate, Groot Constantia Homestead and Wine Museum includes a manor house with 18th- and 19th-century furnishings, plus collections of drinking vessels and carriages. The Constantia Greenbelt network includes the tree-lined Alphen Trail.`
	},
	// Kalk Bay
	KB: {
		Id: "ChIJu2x0EhZAzB0RCyIwnb_NXFY",
		info: `Kalk Bay is a fishing village on the coast of False Bay, It lies between the ocean and sharply rising mountainous heights that are buttressed by crags of grey Table Mountain Sandstone. Dutch/Afrikaans name "Kalkbaai" is "Lime Bay".`
	},
	// Boulders Beach/Penguins
	BL: {
		Id: "ChIJvxVitEk-zB0RVJetXFk0qww",
		info: `Sheltered public bay with a sandy beach & boardwalk, plus free-roaming colony of African penguins.`
	},
	// Chapmens Peak Drive
	CHP: {
		Id: "ChIJVagz7BNpzB0Rv9p0tMDvZsg",
		info: `Chapman's Peak is the name of a mountain on the western side of the Cape Peninsula, between Hout Bay and Noordhoek. The mountain falls sharply for hundreds of metres into the Atlantic Ocean. A spectacular road, known as Chapman's Peak Drive, hugs the near-vertical face of the mountain.`
	},
	// Distrct Six Mus
	DSM: {
		Id: "ChIJXdpUhHtnzB0RI8TYhHL5028",
		info: `Museum tracing the 1970s forced clearance of 60,000 residents & demolition of homes under apartheid.`
	},
	// Lions Head
	LH: {
		Id: "ChIJ7Tf0rQVnzB0REQJgaykzKEg",
		info: `Boasting panoramic views of the city, this landmark mountain offers hiking trails & historic graves.`
	},

	// Robin Island
	RI: {
		Id: "ChIJy3XfS2WKzB0RYZDeLkVkb30",
		info: `Historical landmark known for housing political prisoners such as Nelson Mandela, now with a museum.`
	},
	TOAI: {
		Id: "ChIJfeaqwlpnzB0Rl2i0iRvp6SI",
		info:
			"Modern indoor aquarium & conservation center offering close encounters with sharks & penguins."
	}
};
//-=-=-=-=-=--=-=-=-ADVENTURE JSON=-=-=--=-=-=--=-=
let adventureJSON = {
	//Kayak Cape Town
	KAY: {
		Id: "ChIJG31DwhJnzB0RC9C77ufuck0",
		info: `Kayaking is vastly becoming one of the top Adventure Activities that Cape Town has to offer. With our guided Kayak Tour in Hout Bay and state of the art equipment - let Kayak Adventures take you on a scenic excursion that you won't forget!`
	},
	// Big Five Game Reserve https://inverdoorn.com/
	SAFA: {
		Id: "ChIJm-ZKiSFnzB0R4NBaoM1UpgM",
		info: `Inverdoorn game reserve is filled with various natural life, within the Klein Karoo. The reserve has made a significant contribution to sustaining the biodiversity of the region. Inverdoorn’s 10 000 hectares are also home to the successful cheetah conservation centre.`
	},
	//Abseil Table Mountain abseilafrica.co.za
	ABT: {
		Id: "ChIJ846ZPb5nzB0RCXS_Tom7p9w",
		info: `Explore Cape Town and surrounds with us Abseil Africa is OPEN 7 days a week between 08:30 – 16:00. Bad weather may affect our operation status. Book your trips with us – we want to take you on an adventure of a lifetime!`
	},
	//Wineland Ballooning Cape Town kapinfo.com
	BAL: {
		Id: "ChIJgfmZnllnzB0RPihXS4A96ZA",
		info: `Wineland Ballooning offers daily scenic Hot Air Balloon flights over the naturally beautiful Berg River Valley, one of South Africas famous wine regions.
			   On nearly every flight, while gently floating away, can we see majestic Table Mountain in the distance and on particularly spectacular days you may even see the Atlantic Ocean with the  'Cape of Good Hope'  100 km away.
			   Each flight is totally unique and no two flights are exactly the same.`
	},
	//Shark Bookings sharkbookings.com
	SD: {
		Id: "ChIJY3iy6x0Rzh0RKtT-ViOf004",
		info: `Shark Bookings has been in operation since 2003 as a central bookings office for the most reputable shark diving operators in South Africa. We have by far the most competitive prices for shark cage diving in Cape Town & Gansbaai, and we offer trips to Mossel Bay and Durban. We work with only the best operators, all of whom are fully licensed and registered. And best of all, bookings are in real time, with instant confirmation, there is no waiting around, just book, pay and go shark diving. `
	},
	//Zipline - Cape Canopy Tour capecanopytour.co.za
	ZP: {
		Id: "ChIJfWMCP3THzR0R_8QVpSATqYM",
		info: `A zipline canopy tour in the company of soaring eagles, surrounded by breath-taking Cape fynbos panoramas and mountainscapes only an hour’s drive from Cape Town by car could well be exactly what you are looking for. Thrilled zipliners who have completed the course have described it as super safe. One commented that the quality of the structure and equipment was reassuringly high and had made her fear of heights irrelevant.`
	},
	//Scootours Cape Town scootours.co.za
	SC: {
		Id: "ChIJAxwYC6dnzB0RihwwcBrKwYE",
		info: `Enjoy an exhilarating downhill descent on the Monster Mountain® Scooters. Scootours® is not an extreme activity but a unique and family friendly way to experience nature and the surroundings of your holiday destination. Scootours make use of non motorised Monster Mountain® Scooters, making this an eco friendly adventure. These Swiss designed scooters are used in the Alps during their summer season on the ski slopes when the snow has melted.`
	},
	//Lions Head - Hike Addicts hikeaddicts.com
	HH: {
		Id: "ChIJ1_u4UbNnzB0RH1tMJWyQWrI",
		info: `Cape Town is an adventure hotspot featuring an endless variety of exciting activities. At Hike Addicts we are pleased to offer a diverse selection of Cape Town’s most exhilarating tours on one platform.
			Table Mountain shows off its exceptional beauty all year round and for the more adventurous souls, hiking Table Mountain is possibly the most rewarding and amazing experience you will have in Cape Town.`
	},
	//Cape Toewn Helicotpers helicopterscapetown.co.za
	HT: {
		Id: "ChIJN4QZT1ZnzB0Rq1OQmhhKoFc",
		info: `The helicopter you fly in has a huge impact on the quality of your air-tour experience. Compare Cape Town
		Helicopters’ state-of-the-art helicopters with some other tour helicopters used in Cape Town.`
	},
	WB: {
		Id: "ChIJ5_CYMno_zB0Rb3CrFJuM0vI",
		info:
			"Cape Town Water Bikes is a new way to experience the Simon’s Town coast. Hop on one of the world’s most advanced water bikes and get pedalling for a different perspective."
	}
};
//-=-=-=-=-=--=-=-=-FOODIES JSON=-=-=--=-=-=--=-=
let foodiesJSON = {
	//Jonkershuis Restaurant
	JH: {
		Id: "ChIJe6PtQ9FpzB0R4YORfViLQ5s",
		info: `Jonkershuis Constantia is nestled in the historic core of the Groot Constantia Wine Estate
		next to the historic Manor House and surrounded by ancient oak trees.
		Sweeping views across the oldest wine producing vineyards in South Africa,
		Sustainability and the ethical content of all the food prepared, Reflecting the rich Cape Malay heritage of our ‘home’.
		`
	},
	//Snoekies
	SHB: {
		Id: "ChIJgcBEXzhpzB0R2_0Gu9eDcIA",
		info: `Hans’s purchased an old bus, which he converted into a takeaway cafe and positioned it at the end of Harbour Road, Hout Bay. They named the take-away cafe, Snoekies from where they served fish & chips to the local fishermen. Hans’s wife ran the Snoekies take-away cafe whilst he experimented with smoking fish and they found that his smoked snoek sold well at the café. Before long they found it difficult to keep up with the demand from their garage at home and in 1956 he built a factory in the Hout Bay Harbour.`
	},
	//Harbour House Kalk Bay
	HHKB: {
		Id: "ChIJHWikDhRAzB0RyOvryzibbV8",
		info: `Sitting on the harbour wall it's self is an elegant yet relaxed seafood restaurant with a deck overlooking fishing boats, ocean and mountains.`
	},
	//Mamma Afirca
	MA: {
		Id: "ChIJ-f-De2VnzB0RwYNmkT4nR1A",
		info: `Mama Africa Cape Town enjoys the distinction as a Long Street institution. It is the most unique experience you will have during your visit in Africa. Nowhere else exists where you can be Africa. You can view awesome African sunsets from the top of Table Mountain. But, if you want to immerse yourself in African history and culture, you must visit Mama Africa restaurant and be Africa.`
	},
	//The Shortmarket Club
	TSC: {
		Id: "ChIJ6cobfmZnzB0Rj3KoGeEf7d8",
		info: `Open for lunch and dinner and, in keeping with its luxe old-world feel, many of the dishes are modern interpretations of classics as only chef Randles can do. Where most chefs use ‘seasonal’ and ‘sustainable’ as meaningless selling points, Randles fully embraces it. The restaurant works closely with local suppliers for all of their ingredients, which in turn inspire the menus. As a result, Randles’ food is instantly identifiable. Inventive, playful and refreshed, the dishes he puts on the Shortmarket menus are ever-changing.`
	},
	//Stardust Theatrical Dining
	STD: {
		Id: "ChIJc6IAMYRdzB0R9yLw41HjQtM",
		info: `This is no ordinary restaurant. This is the home of the singing waiter! Tonight, not only will you enjoy the wholesome, sumptuous taste of our designer tagine menu and the buzz of our wine bar’s best and brightest, but you’ll also be served and entertained by the shining stars of Cape Town’s immense pool of talented young performers. Make sure you get your waiter’s`
	},
	//Chefs Warehouse & Canteen
	CWC: {
		Id: "ChIJR-hGZGZnzB0R0DeLE_fCN3o",
		info: `Liam Tomlin opened Banc restaurant in Sydney in 1997 where he garnered many accolades including 3 Chef Hats.
		Relocating to South Africa in 2003 he consulted to various projects within the hospitality industry and in 2010 opened Chefs Warehouse and Cookery School, Cape Town.
		In 2014 the concept was changed, and Chefs Warehouse and Canteen began serving fine-dining quality global tapas.`
	},
	//Cape Point Vineyards Restaurant
	CPVR: {
		Id: "ChIJ4RIv5klqzB0RK47qApYWst8",
		info: `Cape Point Vineyards, a unique farm in Noordhoek where vines are lazily nestled between mountains and ocean. Cool breezes from the sea make for a slow growing season, with a late harvest that results in a truly unique Sauvignon Blanc that is recognised across the globe for it’s rich minerality, structure and tone.`
	},
	//Monkey Valley Resort
	MVR: {
		Id: "ChIJ7xQ8UL9rzB0R0T8uHTXAJvU",
		info: `Nestled within the Milkwood forest at the foot of Chapman’s Peak Noordhoek is Monkey Valley Resort.
		The resort has an unrivaled view of the Noordhoek beach and nature reserve.
		Monkey Valley was built with a sustainable environmentally friendly ethos in order to preserve the natural beauty of the area.`
	},
	TLH: {
		Id: "ChIJ8aBJ0NQ_zB0REMuSYqHp6k8",
		info: `The Café has a beautiful ambience; it is an inviting space, light & airy with a French Provençal and Coastal feel which makes one feel right at home, it is a space where customers love to spend time with a book or with friends and a frothy cappuccino coffee for breakfast, lingering and often taking their shoes off.`
	}
};
// locationFinder is the onClick function that calles InitMap function on "clicked" Location.
var marker, iD;
function locationFinder(locationFinder_id) {
	console.log(locationFinder_id);
	switch (locationFinder_id) {
		case "tm": // Sights starts
			(iD = sightsJSON.TM.Id), (info = sightsJSON.TM.info), initMap();
			break;
		case "cp":
			(iD = sightsJSON.CP.Id), (info = sightsJSON.CP.info), initMap();
			break;
		case "toai":
			(iD = sightsJSON.TOAI.Id), (info = sightsJSON.TOAI.info), initMap();
			break;
		case "bk":
			(iD = sightsJSON.BK.Id), (info = sightsJSON.BK.info), initMap();
			break;
		case "con":
			(iD = sightsJSON.CON.Id), (info = sightsJSON.CON.info), initMap();
			break;
		case "kb":
			(iD = sightsJSON.KB.Id), (info = sightsJSON.KB.info), initMap();
			break;
		case "bl":
			(iD = sightsJSON.BL.Id), (info = sightsJSON.BL.info), initMap();
			break;
		case "chp":
			(iD = sightsJSON.CHP.Id), (info = sightsJSON.CHP.info), initMap();
			break;
		case "dsm":
			(iD = sightsJSON.DSM.Id), (info = sightsJSON.DSM.info), initMap();
			break;
		case "lh":
			(iD = sightsJSON.LH.Id), (info = sightsJSON.LH.info), initMap();
			break;
		case "ri":
			(iD = sightsJSON.RI.Id), (info = sightsJSON.RI.info), initMap();
			break; //addventure starts
		case "kay":
			(iD = adventureJSON.KAY.Id), (info = adventureJSON.KAY.info), initMap();
			break;
		case "safa":
			(iD = adventureJSON.SAFA.Id), (info = adventureJSON.SAFA.info), initMap();
			break;
		case "abt":
			(iD = adventureJSON.ABT.Id), (info = adventureJSON.ABT.info), initMap();
			break;
		case "bal":
			(iD = adventureJSON.BAL.Id), (info = adventureJSON.BAL.info), initMap();
			break;
		case "sd":
			(iD = adventureJSON.SD.Id), (info = adventureJSON.SD.info), initMap();
			break;
		case "zp":
			(iD = adventureJSON.ZP.Id), (info = adventureJSON.ZP.info), initMap();
			break;
		case "sc":
			(iD = adventureJSON.SC.Id), (info = adventureJSON.SC.info), initMap();
			break;
		case "hh":
			(iD = adventureJSON.HH.Id), (info = adventureJSON.HH.info), initMap();
			break;
		case "ht":
			(iD = adventureJSON.HT.Id), (info = adventureJSON.HT.info), initMap();
			break;
		case "wb":
			(iD = adventureJSON.WB.Id), (info = adventureJSON.WB.info), initMap();
			break;
		// Foodies Strars
		case "jh":
			(iD = foodiesJSON.JH.Id), (info = foodiesJSON.JH.info), initMap();
			break;
		case "shb":
			(iD = foodiesJSON.SHB.Id), (info = foodiesJSON.SHB.info), initMap();
			break;
		case "hhkb":
			(iD = foodiesJSON.HHKB.Id), (info = foodiesJSON.HHKB.info), initMap();
			break;
		case "ma":
			(iD = foodiesJSON.MA.Id), (info = foodiesJSON.MA.info), initMap();
			break;
		case "tsc":
			(iD = foodiesJSON.TSC.Id), (info = foodiesJSON.TSC.info), initMap();
			break;
		case "std":
			(iD = foodiesJSON.STD.Id), (info = foodiesJSON.STD.info), initMap();
			break;
		case "cwc":
			(iD = foodiesJSON.CWC.Id), (info = foodiesJSON.CWC.info), initMap();
			break;
		case "cpvr":
			(iD = foodiesJSON.CPVR.Id), (info = foodiesJSON.CPVR.info), initMap();
			break;
		case "mvr":
			(iD = foodiesJSON.MVR.Id), (info = foodiesJSON.MVR.info), initMap();
			break;
		case "tlh":
			(iD = foodiesJSON.TLH.Id), (info = foodiesJSON.TLH.info), initMap();
			break;
	}
}
function initMap() {
	map = new google.maps.Map(document.getElementById("map"), {
		center: { lat: -33.9142686, lng: 18.0955572 },
		zoom: 14,
		mapTypeId: "hybrid",
		mapTypeControl: false
	});
	var request = {
		placeId: iD,
		fields: [
			"name",
			"rating",
			"formatted_phone_number",
			"geometry",
			"plus_code",
			"website",
			"user_ratings_total"
		]
	};
	service = new google.maps.places.PlacesService(map);
	service.getDetails(request, callback);
	function callback(place, status) {
		if (status == google.maps.places.PlacesServiceStatus.OK) {
			marker = new google.maps.Marker({
				map: map,
				position: place.geometry.location,
				title: place.name
			});
			var latlng = place.geometry;
			var name = place.name;
			var rating = place.rating;
			var website = place.website;
			var phone = place.formatted_phone_number;
			console.log(name, rating, website, phone, latlng);
			if (rating == undefined) {
				var rating = " ";
			} else {
				var rating = `<img src="./assets/images/icons/pageIcons/star.ico" alt="star rating"> ${place.rating}`;
			}
			if (phone == undefined) {
				var phone = " ";
			} else {
				var phone =
					/*`<img src="./assets/images/icons/pageIcons/call20x20.png"</> use ::before*/
					`${place.formatted_phone_number}`;
			}
			if (website == undefined) {
				var website = " ";
			} else {
				var website = `${place.website}`;
			}

			var markerData =
				'<div class="infowindowContiner">' +
					'<div class="infowidHeading">' +
						'<h2 class="infoHeading">' + `${name}` + "<br>" +
							'<p class="rating">' + `${rating}` + "</p>" +
						"</h2>" +
					"</div>" +
					'<div class="infowindoBody">' +
						'<p class="infobody">' + `${info}` + "</p>" +
								'<div class="scocial">' + `<p class="rating">` + `${phone}` +
									`<div class="website rating">` +
									`<a href="${website}" class="rating" 
										target="_blank">${website}</a>` +
									"</div>" +
									`<div class="imgRap">` +
									`<img id="directionsImg" 
										class="dirImg" 
										onclick="getDirectionsAndLocations(), addSpinner()" 
										src="./assets/images/icons/pageIcons/googleMapsGo50x50.jpg"
										alt="Directions"</>` +
									`</div>` +
							"</div>" +
						"</div>" +
					"</div>" +
				"</div>";
			var infowindow = new google.maps.InfoWindow({
				content: markerData
			});
			map.setCenter(marker.getPosition());
			infowindow.open(Map, marker);
		} else {
			console.log("states error");
		}
	}
}
var map, infoWindow, userLocation;

function getDirectionsAndLocations() {
	map = new google.maps.Map(document.getElementById("map"), {
		center: { lat: -34.397, lng: 150.644 },
		zoom: 10,
		mapTypeId: "hybrid",
		mapTypeControl: false
	});
	infoWindow = new google.maps.InfoWindow();
	userMarker = new google.maps.Marker();
	// HTML5 geolocation.
	if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(
			function(position) {
				userLocation = {
					lat: position.coords.latitude,
					lng: position.coords.longitude
				};
				var directionsService = new google.maps.DirectionsService();
				var directionsRenderer = new google.maps.DirectionsRenderer();

				var directionsMap;
				var mapOptions = {
					zoom: 10,
					center: marker.position,
					mapTypeId: "hybrid",
					mapTypeControl: false
				};
				directionsMap = new google.maps.Map(
					document.getElementById("map"),
					mapOptions
				);
				directionsRenderer.setMap(directionsMap);
				directionsRenderer.setPanel(document.getElementById("directionsPanel"));

				var request = {
					origin: userLocation,
					destination: marker.position,
					travelMode: "DRIVING"
				};
				directionsService.route(request, function(result, status) {
					console.log(result);
					if (status == "OK") {
						directionsRenderer.setDirections(result);
					}
				});

				infoWindow.setPosition(userLocation);
				infoWindow.setContent(`<p class="user">Location Fond</p>`);
				infoWindow.open(map);
				map.setCenter(userLocation);
			},
			function() {
				handleLocationError(true, infoWindow, map.getCenter());
			}
		);
	} else {
		// Browser doesn't support Geolocation
		handleLocationError(false, infoWindow, map.getCenter());
	}
}

function handleLocationError(browserHasGeolocation, infoWindow, pos) {
	infoWindow.setPosition(pos);
	infoWindow.setContent(
		browserHasGeolocation
			? "Error: The Geolocation service failed."
			: "Error: Your browser doesn't support geolocation."
	);
	infoWindow.open(map);
}
